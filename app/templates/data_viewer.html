{% extends 'base.html' %}

{% block title %}Data Puller{% endblock %}

{% block scripts %}
<script type = "text/javascript" src = "{{ url_for('static', filename = 'js/dataViewer.js') }}" ></script>
{% endblock %}

{% block logout_btn %}
{% if session.user_info %}
<a href="{{ url_for('auth.auth_logout') }}"><button type="button" class="btn logout-btn menu__link" id="logout-btn" onclick="logoutAndStay()">Log out</button></a>
{% endif %}
{% endblock %}

{% block content %}
<div>
    <h2>Data Viewer</h2>
    {% if not session.user_info %}

        <p>Please log in first.</p>
        <a href="{{ url_for('auth.auth_login', next=request.url, provider='google') }}"><button type="button" class="btn login-btn" id="login-btn">Log in</button></a>

    {% else %}
    <div id="viewer-selection-container">
        <!-- dynamic table selection rows -->
    </div>
    <button type="button" class="btn add-btn" onclick="addTableSelectionRow(getTableDataOptions())"><i class="fa fa-plus"></i> Add table</button>
    <button type="submit" class="btn submit-btn" onclick="displayMergedTable()">Go</button>
    <!-- <button id="btn-download" type="button" class="btn download-btn">Download Current View</button> -->
    <div class="viewer-main">
        <iframe id="dash-frame" style="width:100%; height:800px; border:none;" src=""></iframe>
    </div>
    
    {% endif %}
</div>
{% endblock %}